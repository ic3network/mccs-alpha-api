# MCCS Alpha API

## ðŸš§ This is a work in progress  ðŸš§

See our development [roadmap](https://github.com/ic3network/mccs#roadmap).

## Overview

The MCCS Alpha API is a prototype API that exposes all of the functionality currently available in the [alpha version of the MCCS web application](https://github.com/ic3network/mccs-alpha).

By providing an API, developers who want to create their own version of MCCS will have significant flexibility to implement it in whatever way they choose. This means developers can present MCCS in any language, setup their own signup flow, optimize it for whatever devices their user base prefer, develop a mobile app, etc.

We are making this code public to show our commitment to free and open source software, and to signal our intention to develop mutual credit software that will be freely available to anyone who wishes to implement a mutual credit trading system.

## Main Functions

There are four main functions that the MCCS API provides:

1. **Manage accounts** - create and modify user accounts and related business details
2. **Find businesses** - view and search for businesses based on what they sell and need
3. **Transfer mutual credits** - create and complete/cancel mutual credit (MC) transfers between businesses
4. **Review transfer activity** - view pending and completed MC transfers

See the detailed description of these main functions in the [MCCS Alpha web application repository](https://github.com/ic3network/mccs-alpha#main-functions).

## How to Start

Basic requirements: Go version 1.13+, Docker and Docker Compose ([see all requirements](#requirements))

1. Use the [example file](configs/seed.yaml) to create `configs/development.yaml` and change the following parameters
    ```
    env: development

    psql:
      host: postgres

    mongo:
        url: mongodb://mongo:27017

    es:
        url: http://es01:9200
    ```
1. Generate JSON Web Token public and private keys
    1. Generate private key
        ```
        openssl genrsa -out private.pem 2048
        ```
    1. Extract public key from it
        ```
        openssl rsa -in private.pem -pubout > public.pem
        ```
    1. Copy/paste the private and public keys into `configs/development.yaml`
1. Run the app
    ```
    make run
    ```
1. Seed the DB with some test data
    ```
    make seed
    ```
1. Visit the website
    ```
    http://localhost:8080/api/v1/signup
    http://localhost:8080/api/v1/login
    ```
<!-- 1. Login as admin (in a private browsing tab or another browser)
    ```
    http://localhost:8080/admin/login
    user = admin1@dev.null
    pass = password
    ```
1. View/query Elasticsearch data with Kibana
    ```
    http://localhost:5601
    ``` -->

## Requirements

**Software**

- [Go](https://golang.org/doc/install)
- [Docker](https://docs.docker.com/install/)
- [Docker Compose](https://docs.docker.com/compose/install/)

The MCCS web app is written in Go, and it uses Docker Compose to orchestrate itself and its dependencies as Docker containers.

**App Dependencies**

- [MongoDB](https://en.wikipedia.org/wiki/MongoDB) - the database used to store user and business directory data
- [PostgreSQL](https://www.postgresql.org/) - the database used to store mutual credit transfer data
- [Elasticsearch](https://en.wikipedia.org/wiki/Elasticsearch) - the search engine for searching user/business data

These dependencies are installed automatically by Docker Compose.

**External Dependencies**

- [Sendgrid](https://sendgrid.com/) - email delivery provider for sending emails generated by MCCS (e.g., welcome and password reset emails)

Sendgrid does not need to be setup to run the app in development mode.
